// Generated by CoffeeScript 1.6.3
(function() {
  this.search = function(terms) {
    var data;
    data = '';
    $.ajax({
      url: '/query/' + terms,
      dataType: 'json',
      method: 'GET',
      async: false,
      success: function(e) {
        return data = e;
      }
    });
    return data;
  };

  this.build_table = function(results) {
    var o, table, _i, _len;
    table = '\
        <table class="table table-striped table-hover">\
            <thead><tr><td>Book</td><td>Page</td></tr></thead>\
            <tbody>';
    for (_i = 0, _len = results.length; _i < _len; _i++) {
      o = results[_i];
      console.log(o);
      table += '<tr><td>' + o.book + '</td><td>' + o.page + '</td></tr>';
    }
    table += '</tbody></table>';
    return table;
  };

  $(document).ready(function() {
    return $('form').submit(function(e) {
      var search_term;
      e.preventDefault();
      search_term = $('input').val();
      return $('#results').html(build_table(search(search_term)));
    });
  });

}).call(this);
